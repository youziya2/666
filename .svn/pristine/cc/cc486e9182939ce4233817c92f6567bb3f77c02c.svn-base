webpackJsonp([60],{m0Wy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("LAaC"),i=a("7AIs"),n=(a("I22p"),{data:function(){return{input:!1,list:[],end:"组织机构",tableData:[],isAdd:!1,showIndex:0,checked:!1,allPersonList:[],orgList:[],deparment:{orgename:"",orgcname:"",phone:"",mobile:"",remark:""},formArr:[],product:[],isCollapse:!0,allCheck:"",statesObj:{},deparmentList:{},isLeave:!1,isActivation:!1,isHear:!1,totalChoice:[],totalChecked:[],showChild:-1,showBox:!1,centerDialogVisible:!1,addDeparment:!1,editDeparment:!1,deletshow:!1,bordercolor:{color:"1px solid"+this.colorselects},windowHeight:""}},computed:{colorselects:function(){return this.$route.matched[0].meta.colorselect}},created:function(){window.addEventListener("resize",this.getHeight),Object(i.c)(this),this.getHeight(),this.getData()},watch:{allPersonList:function(){var t=this;this.allPersonList.forEach(function(e){t.$nextTick(function(){for(var a=0;a<t.tableData.length;a++)e.psuserid==t.tableData[a].psuserid&&t.$refs.multipleTable.toggleRowSelection(e,!0)})})}},methods:{getHeight:function(){this.windowHeight=this.$config.getHeight(220)},editClick:function(t){for(var e in this.deparment)this.deparment[e]="addDeparment"==t?"":this.orgList[this.showIndex][e];this.showBox=!1,this[t]=!0,this.showChild=-1},checkDepartment:function(){return""==this.deparment.orgename?(this.$message.error("英文名称不能为空"),!1):""!=this.deparment.orgcname||(this.$message.error("中文名称不能为空"),!1)},getCompanyPersonList:function(){var t=this;this.isAdd=!0;var e={success:function(e){e.data.message.indexOf("getSuccess")>-1?t.allPersonList=e.data.allPersonList:t.$message.error(t.$promptObj.searchfail)}};Object(s.y)(e)},addOrg:function(){var t=this,e={self:this,success:function(e){e.data.message.indexOf("addSuccess")>-1?(t.addDeparment=!1,t.getData()):t.$message.error(t.$promptObj.savefail)}};this.checkDepartment()&&Object(s.d)(e)},removeOrgById:function(){var t=this,e={orgid:this.orgList[this.showIndex].orgid,success:function(e){e.data.message.indexOf("removeSuccess")>-1?(t.$message.success(t.$promptObj.removesuccess),t.centerDialogVisible=!1,t.getData()):t.$message.error(t.$promptObj.removefail)}};Object(s._14)(e)},editOrgById:function(){var t=this,e={self:this,success:function(e){e.data.message.indexOf("editSuccess")>-1?(t.editDeparment=!1,t.getData()):t.$message.error(t.$promptObj.updatefail)}};this.checkDepartment()&&Object(s.m)(e)},addPerple:function(t,e){var a=this,i=t.length&&-1!==t.indexOf(e),n={orgid:this.orgList[this.showIndex].orgid,data:e.psuserid+"@"+i,success:function(t){t.data.message.indexOf("editSuccess")>-1?a.getOrgPersonList(a.showIndex):a.$message.error(a.$promptObj.searchfail)}};Object(s.n)(n)},getStates:function(){this.formArr=[],this.isLeave&&this.formArr.push(1),this.isActivation&&this.formArr.push(-1),this.isHear&&this.formArr.push(0),this.getOrgPersonList(this.showIndex)},getOrgPersonList:function(t){var e=this;this.showIndex=t;var a="";if(this.formArr.length>0){for(var i=0;i<this.formArr.length;i++)a+="states="+this.formArr[i]+"&";a=a.substring(0,a.length-1)}var n={infcMethod:"BHUserServiceInfc.getOrgPersonList",orgid:this.orgList[this.showIndex].orgid,data:a,success:function(t){var a=JSON.parse(t);if(a.message.indexOf("getSuccess")>-1){e.tableData=a.orgPersonList;for(var s=0;s<e.tableData.length;s++)e.tableData[s].states=e.statesObj[e.tableData[s].states]}else e.$message.error(e.$promptObj.searchfail)}};Object(s.O)(n)},getData:function(){var t=this,e={success:function(e){e.data.message.indexOf("getSuccess")>-1?(t.orgList=e.data.orgList,t.getOrgPersonList(0)):t.$message.error(t.$promptObj.searchfail)}};Object(s.x)(e)},delOne:function(){}}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("the-breadcrumb",{attrs:{end:t.end,list:t.list}}),t._v(" "),a("div",{staticClass:"structure-content"},[a("el-scrollbar",{staticStyle:{width:"100%","overflow-x":"hidden"},style:{height:t.windowHeight}},[a("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"},style:{height:t.windowHeight}},[a("el-aside",{attrs:{width:"230px",height:"100%"}},[a("p",{staticClass:"txt-narp"},[t._v(t._s(t.deparmentList.tit15))]),t._v(" "),a("div",{staticStyle:{"padding-left":"20px",cursor:"pointer"}},t._l(t.orgList,function(e,s){return a("div",{staticClass:"show-dpt",class:t.showIndex==s?"active-dpt":"",on:{click:function(e){t.getOrgPersonList(s)},mouseenter:function(e){t.showChild=s},mouseleave:function(e){t.showChild=-1}}},[a("div",[a("span",{staticClass:"txt-narp",staticStyle:{float:"left",width:"140px"}},[t._v(t._s(e.orgcname))]),t._v(" "),t.showIndex==s&&t.showChild==s?a("i",{staticClass:"el-icon-caret-bottom eicb",on:{mouseenter:function(e){t.showBox=!0},mouseleave:function(e){t.showBox=!1}}}):t._e()]),t._v(" "),t.showIndex==s&&t.showBox?a("div",{staticClass:"edit-content",style:"top:"+(74+36*s)+"px",on:{mouseenter:function(e){t.showBox=!0},mouseleave:function(e){t.showBox=!1}}},[0===s?a("div",{staticClass:"edit-option",on:{click:function(e){t.editClick("addDeparment")}}},[t._v(t._s(t.deparmentList.tit21))]):t._e(),t._v(" "),0!==s?a("div",{staticClass:"edit-option",on:{click:function(e){t.editClick("editDeparment")}}},[t._v(t._s(t.deparmentList.tit22))]):t._e(),t._v(" "),0!==s?a("div",{staticClass:"edit-option",on:{click:function(e){t.editClick("centerDialogVisible")}}},[t._v(t._s(t.deparmentList.tit23))]):t._e()]):t._e()])}),0)]),t._v(" "),a("el-container",[a("el-header",{staticStyle:{"text-align":"left","line-height":"40px",height:"120px"}},[a("div",{staticStyle:{"font-weight":"600","font-size":"20px"}},[t._v(t._s(t.orgList[t.showIndex]?t.orgList[t.showIndex].orgcname:""))]),t._v(" "),a("div",{staticStyle:{"border-bottom":"1px solid #E2E2E2",padding:"10px 0 20px",height:"40px"}},[a("input",{staticClass:"btn-fl",style:{backgroundColor:t.isAdd?"#2557A8":"#487FD9"},attrs:{type:"button",value:t.deparmentList.tit16},on:{click:t.getCompanyPersonList}}),t._v(" "),a("span",{staticClass:"ck-fr",staticStyle:{"margin-right":"4px"}},[a("el-checkbox",{on:{change:t.getStates},model:{value:t.isLeave,callback:function(e){t.isLeave=e},expression:"isLeave"}},[t._v(t._s(t.deparmentList.tit20))])],1),t._v(" "),a("span",{staticClass:"ck-fr"},[a("el-checkbox",{on:{change:t.getStates},model:{value:t.isActivation,callback:function(e){t.isActivation=e},expression:"isActivation"}},[t._v(t._s(t.deparmentList.tit19))])],1),t._v(" "),a("span",{staticClass:"ck-fr"},[a("el-checkbox",{on:{change:t.getStates},model:{value:t.isHear,callback:function(e){t.isHear=e},expression:"isHear"}},[t._v(t._s(t.deparmentList.tit18))])],1),t._v(" "),a("span",{staticClass:"ck-fr",staticStyle:{color:"#ccc"}},[t._v("("+t._s(t.tableData.length)+" "+t._s(t.deparmentList.tit24)+")")])])]),t._v(" "),a("el-main",[a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:t.deparmentList.tit25,width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"iconfont icon-yonghu2",staticStyle:{color:"rgb(133, 172, 239)","vertical-align":"middle",display:"inline-block","font-size":"28px"}}),t._v(" "),a("span",[t._v(t._s(e.row.nickname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"realname",label:t.deparmentList.tit26,width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:t.deparmentList.tit27,width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:t.deparmentList.tit28,width:"370"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deparment",label:t.deparmentList.tit29,width:"170"}}),t._v(" "),a("el-table-column",{attrs:{prop:"poscname",label:t.deparmentList.tit30,width:"210"}}),t._v(" "),a("el-table-column",{attrs:{prop:"states",label:t.deparmentList.tit31}})],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.deparmentList.tit21,visible:t.addDeparment,width:"35%"},on:{"update:visible":function(e){t.addDeparment=e}}},[a("div",[a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.orgename))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deparment.orgename,expression:"deparment.orgename"}],staticClass:"add-department-btn",attrs:{placeholder:t.deparmentList.orgename},domProps:{value:t.deparment.orgename},on:{input:function(e){e.target.composing||t.$set(t.deparment,"orgename",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.orgcname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deparment.orgcname,expression:"deparment.orgcname"}],staticClass:"add-department-btn",attrs:{placeholder:t.deparmentList.orgcname},domProps:{value:t.deparment.orgcname},on:{input:function(e){e.target.composing||t.$set(t.deparment,"orgcname",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.mobile))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deparment.mobile,expression:"deparment.mobile"}],staticClass:"add-department-btn",attrs:{placeholder:t.deparmentList.mobile},domProps:{value:t.deparment.mobile},on:{input:function(e){e.target.composing||t.$set(t.deparment,"mobile",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.phone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deparment.phone,expression:"deparment.phone"}],staticClass:"add-department-btn",attrs:{placeholder:t.deparmentList.phone},domProps:{value:t.deparment.phone},on:{input:function(e){e.target.composing||t.$set(t.deparment,"phone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.remark))]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.deparment.remark,expression:"deparment.remark"}],staticClass:"add-department-btn",staticStyle:{"vertical-align":"top"},attrs:{rows:"3",placeholder:t.deparmentList.remark},domProps:{value:t.deparment.remark},on:{input:function(e){e.target.composing||t.$set(t.deparment,"remark",e.target.value)}}})])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{padding:"12px 38px"},attrs:{type:"primary"},on:{click:t.addOrg}},[t._v(t._s(t.$buttonObj.save))])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.deparmentList.tit22,visible:t.editDeparment,width:"35%"},on:{"update:visible":function(e){t.editDeparment=e}}},[a("div",[a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.orgename))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deparment.orgename,expression:"deparment.orgename"}],staticClass:"add-department-btn",attrs:{placeholder:t.deparmentList.orgename},domProps:{value:t.deparment.orgename},on:{input:function(e){e.target.composing||t.$set(t.deparment,"orgename",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.orgcname))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deparment.orgcname,expression:"deparment.orgcname"}],staticClass:"add-department-btn",attrs:{placeholder:t.deparmentList.orgcname},domProps:{value:t.deparment.orgcname},on:{input:function(e){e.target.composing||t.$set(t.deparment,"orgcname",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.mobile))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deparment.mobile,expression:"deparment.mobile"}],staticClass:"add-department-btn",attrs:{placeholder:t.deparmentList.mobile},domProps:{value:t.deparment.mobile},on:{input:function(e){e.target.composing||t.$set(t.deparment,"mobile",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.phone))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deparment.phone,expression:"deparment.phone"}],staticClass:"add-department-btn",attrs:{placeholder:t.deparmentList.phone},domProps:{value:t.deparment.phone},on:{input:function(e){e.target.composing||t.$set(t.deparment,"phone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"_dialog"},[a("span",{staticClass:"grid-content"},[t._v(t._s(t.deparmentList.remark))]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.deparment.remark,expression:"deparment.remark"}],staticClass:"add-department-btn",staticStyle:{"vertical-align":"top"},attrs:{rows:"3",placeholder:t.deparmentList.remark},domProps:{value:t.deparment.remark},on:{input:function(e){e.target.composing||t.$set(t.deparment,"remark",e.target.value)}}})])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{padding:"12px 38px"},attrs:{type:"primary"},on:{click:t.editOrgById}},[t._v(t._s(t.$buttonObj.save))])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.$promptObj.warn,visible:t.centerDialogVisible,width:"330px",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("span",[t._v(t._s(t.$promptObj.delwarn))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v(t._s(t.$buttonObj.cancel))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.removeOrgById}},[t._v(t._s(t.$buttonObj.sure))])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.deparmentList.tit16,visible:t.isAdd,width:"35%"},on:{"update:visible":function(e){t.isAdd=e}}},[a("div",{staticClass:"add-user"},[a("el-table",{ref:"multipleTable",attrs:{data:t.allPersonList},on:{select:t.addPerple}},[a("el-table-column",{attrs:{type:"selection",prop:"checked",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:t.deparmentList.tit25,width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"iconfont icon-yonghu2",staticStyle:{color:"rgb(133, 172, 239)","vertical-align":"middle",display:"inline-block","font-size":"28px"}}),t._v(" "),a("span",[t._v(t._s(e.row.nickname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"realname",label:t.deparmentList.tit26}})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(t){a("ordH")},"data-v-1a917da2",null);e.default=o.exports},ordH:function(t,e){}});
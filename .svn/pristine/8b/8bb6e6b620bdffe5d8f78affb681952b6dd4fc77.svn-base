webpackJsonp([24],{U4fH:function(e,t,s){"use strict";t.b=function(e){e.fbInfo=Object(a.n)(i,n,o),e.subtypes=Object(a.m)(i,o.subtypes),e.levels=Object(a.m)(i,o.levels),e.states=Object(a.m)(i,o.states),e.fbList=Object(a.m)(i,c)},t.a=function(e){e.fbList=Object(a.m)(i,c),e.levels=Object(a.m)(i,o.levels),e.states=Object(a.m)(i,o.states)};var a=s("I22p"),i="feedback",l=JSON.parse(localStorage.languageObj),n={scct:{name:"关键字",val:"",select:!1,must:!0,disable:!0},starttime:{name:"开始时间",val:"",select:!1,must:!0},endtime:{name:"结束时间",val:"",select:!1,must:!0},subtypes:{name:"消息类型",val:"",select:!0,must:!0},levels:{name:"优先级",val:"",select:!1,must:!0},states:{name:"问题状态",val:"",select:!0,must:!0}},c={savetime:"反馈时间",states:"问题状态",levels:"优先级",answers:"反馈内容",introid:"用户ID",phone:"联系方式",name:"用户姓名",account:"用户账号",operating:"操作",handl:"处理",solved:"已解决",solve:"待解决",solving:"解决中",ctfb:"用户反馈",fbList:"反馈列表",fbDetail:"反馈详情",info:"用户信息",choose:"请选择",search:"输入关键字搜索",all:"全部",hardware:"软件问题",general:"一般",important:"重要",urgent:"紧急",importantEmergency:"重要紧急"},o={subtypes:{all:l.select_all||"全部",hardware:l.select_hardware||"硬件问题",software:l.select_software||"软件问题"},levels:{0:l.select_all||"全部",1:l.select_levels1||"一般",2:l.select_levels2||"重要",3:l.select_levels3||"紧急",4:l.select_levels4||"重要紧急"},states:{0:l.select_all||"全部",1:l.select_states1||"待解决",2:l.select_states2||"解决中",3:l.select_states3||"已解决"}}},aVOL:function(e,t){},qDgh:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("js5j"),i=s("LAaC"),l=s("U4fH"),n=s("I22p"),c={data:function(){return{list:[{router:"用户反馈"}],end:"反馈列表",imgs:{0:"./static/img/fb_nomarl.png",1:"./static/img/fb_important.png",2:"./static/img/fb_urgent.png",3:"./static/img/fb_critical.png"},backGroundColor:{0:"#D81919",1:"#D98C1E",2:"#0FBD50"},fbList:{},fbInfo:{},subtypes:{},levels:{},states:{},subtypesVal:"",levelsVal:"",statesVal:"",thisPage:1,perPage:20,sumRecord:0,totalChoice:[],totalChecked:[],selectNum:0,centerDialogVisible:!1,currs:"",checked:"",feedBackList:[],deletshow:!1,getheight:""}},components:{child:a.a},filters:{capitalize:function(e){return e.length>25?e.substring(0,25)+"……":e}},created:function(){Object(l.b)(this),this.list[0].router=this.fbList.ctfb,this.end=this.fbList.fbList,window.addEventListener("resize",this.getHeight),this.getHeight(),this.getScct(),this.getData()},methods:{getCurrent:function(e){this.thisPage=e,this.getData()},initData:function(){this.thisPage=1,this.subtypesVal="",this.levelsVal="",this.statesVal="",Object(n.d)("fb"),Object(l.b)(this),this.getData()},getScct:function(){if(this.thisPage=1,!sessionStorage.scctObj)return!1;var e=JSON.parse(sessionStorage.scctObj).fb||{};if(e)for(var t in this.fbInfo)e[t]&&(this.fbInfo[t].val=e[t])},setScct:function(){var e={starttime:"",endtime:"",scct:"",subtypes:"",levels:"",states:""};for(var t in this.fbInfo)this.fbInfo[t].val&&(e[t]=this.fbInfo[t].val);Object(n.r)("fb",e)},doSearch:function(){this.thisPage=1,this.setScct(),this.getData()},getChoice:function(e,t,s,a){Object(n.l)(e,t,s,a)},doChoice:function(e,t){this.centerDialogVisible=!0,this[t]=Object(n.h)(e,t),this.selectNum=this[t].length,this.$bus.emit("deleteArr",this[t],"fbid")},delOne:function(){var e=this,t={success:function(t){(t=JSON.parse(t)).message.indexOf("removeSuccess")>-1?(e.$message.success(e.$promptObj.removesuccess),e.centerDialogVisible=!1,e.$bus.emit("removeTab",e.totalChecked),e.quanxuan(),e.getData()):e.$message.error(e.$promptObj.removefail)}};Object(i.h)("BHFeedbackServiceInfc.batchRemoveFeedback","feedback",t)},quanxuan:function(){this.checked?this.feedBackList.forEach(function(e){return e.listCheck=!0}):this.feedBackList.forEach(function(e){return e.listCheck=!1})},goappxiugai:function(e,t,s){var a=Object(n.q)(e,t,"/management/feedBack/feedBackDetail/","./static/img/smallyy.png",s);this.$emit("addxiugai",a)},getHeight:function(){this.getheight=this.$config.getHeight(390)},turnArr:function(){for(var e=arguments.length,t="",s=0;s<e;s++)t=this.fbInfo[arguments[s]].val,this[arguments[s]+"Val"]="all"==t||"0"==t?"":t-1>-1?t-1:t},getData:function(){var e=this;if(this.turnArr("subtypes","levels","states"),new Date(this.fbInfo.starttime.val)>new Date(this.fbInfo.endtime.val))return this.$message.error("结束时间不能小于开始时间");this.fbInfo.starttime.val&&(this.fbInfo.starttime.val=Object(n.o)(new Date(this.fbInfo.starttime.val),!0)),this.fbInfo.endtime.val&&(this.fbInfo.endtime.val=Object(n.o)(new Date(this.fbInfo.endtime.val),!0));var t={self:this,success:function(t){if(t.data.message.indexOf("getSuccess")>-1){var s=t.data.feedbackList,a={};e.feedBackList=[];for(var i=0;i<s.length;i++)(a=s[i].fieldvalues).savetime=Object(n.o)(new Date(a.savetime)),a.listCheck=!1,e.feedBackList.push(a);e.currs=Math.ceil(t.data.page.sumRecord/e.perPage),e.$bus.emit("doPage",e.currs,e.perPage,e.thisPage),e.totalChoice=[],e.totalChecked=[]}else e.$message.error(e.$promptObj.searchfail)}};Object(i.E)(t)}},computed:{colorselects:function(){return this.$route.matched[0].meta.colorselect}},watch:{feedBackList:{deep:!0,handler:function(e){var t=this;this.deletshow=!1,this.checked=this.feedBackList.length>0,e.forEach(function(e){e.listCheck?t.deletshow=!0:t.checked=!1})}}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("the-breadcrumb",{attrs:{end:e.end,list:e.list},on:{initData:e.initData}}),e._v(" "),s("div",{staticClass:"feedBackListContent"},[s("div",{staticClass:"feedbackInput"},[s("div",[s("span",{staticClass:"grid-content"},[e._v(e._s(e.fbInfo.scct.name))]),e._v(" "),s("el-input",{attrs:{placeholder:e.fbList.search},model:{value:e.fbInfo.scct.val,callback:function(t){e.$set(e.fbInfo.scct,"val",t)},expression:"fbInfo.scct.val"}})],1),e._v(" "),s("div",[s("span",{staticClass:"grid-content"},[e._v(e._s(e.fbInfo.starttime.name))]),e._v(" "),s("el-date-picker",{attrs:{type:"date",placeholder:e.fbList.choose},model:{value:e.fbInfo.starttime.val,callback:function(t){e.$set(e.fbInfo.starttime,"val",t)},expression:"fbInfo.starttime.val"}})],1),e._v(" "),s("div",[s("span",{staticClass:"grid-content"},[e._v(e._s(e.fbInfo.endtime.name))]),e._v(" "),s("el-date-picker",{attrs:{type:"date",placeholder:e.fbList.choose},model:{value:e.fbInfo.endtime.val,callback:function(t){e.$set(e.fbInfo.endtime,"val",t)},expression:"fbInfo.endtime.val"}})],1)]),e._v(" "),s("div",{staticClass:"feedbackInput"},[s("div",[s("span",{staticClass:"grid-content"},[e._v(e._s(e.fbInfo.subtypes.name))]),e._v(" "),s("el-select",{attrs:{placeholder:e.fbList.choose},model:{value:e.fbInfo.subtypes.val,callback:function(t){e.$set(e.fbInfo.subtypes,"val",t)},expression:"fbInfo.subtypes.val"}},e._l(e.subtypes,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),s("div",[s("span",{staticClass:"grid-content"},[e._v(e._s(e.fbInfo.levels.name))]),e._v(" "),s("el-select",{attrs:{placeholder:e.fbList.choose},model:{value:e.fbInfo.levels.val,callback:function(t){e.$set(e.fbInfo.levels,"val",t)},expression:"fbInfo.levels.val"}},e._l(e.levels,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),s("div",[s("span",{staticClass:"grid-content"},[e._v(e._s(e.fbInfo.states.name))]),e._v(" "),s("el-select",{attrs:{placeholder:e.fbList.choose},model:{value:e.fbInfo.states.val,callback:function(t){e.$set(e.fbInfo.states,"val",t)},expression:"fbInfo.states.val"}},e._l(e.states,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),s("el-button",{staticClass:"feedBackQuery",style:{backgroundColor:e.colorselects,color:"#fff"},nativeOn:{click:function(t){return e.doSearch(t)}}},[s("i",{staticClass:"el-icon-search"})])],1),e._v(" "),s("el-scrollbar",{staticStyle:{width:"100%","overflow-x":"hidden","padding-top":"25px","margin-top":"35px","border-top":"1px solid #CCCCCC"},style:{height:e.getheight}},[s("div",{staticStyle:{"min-height":"485px"}},[s("table",{staticClass:"feedBackListTable",attrs:{spellcheck:"0"}},[s("tr",{staticClass:"feedth"},[s("th",[s("el-checkbox",{on:{change:function(t){e.quanxuan()}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1),e._v(" "),s("th",[e._v(e._s(e.fbList.levels))]),e._v(" "),s("th",[e._v(e._s(e.fbList.answers))]),e._v(" "),s("th",[e._v(e._s(e.fbList.name))]),e._v(" "),s("th",[e._v(e._s(e.fbList.account))]),e._v(" "),s("th",[e._v(e._s(e.fbList.savetime))]),e._v(" "),s("th",[e._v(e._s(e.fbList.states))]),e._v(" "),s("th",{staticStyle:{border:"0px"}},[e._v(e._s(e.fbList.operating))])]),e._v(" "),0==e.feedBackList.length?s("tr",{staticClass:"content-null"},[s("td",{attrs:{colspan:"8"}},[e._v(e._s(e.$buttonObj.noData))])]):e._e(),e._v(" "),e._l(e.feedBackList,function(t,a){return s("tr",{key:a,class:{feedBackListTableChecked:t.listCheck}},[s("td",[s("el-checkbox",{on:{change:function(s){e.getChoice(e.totalChoice,a,t.listCheck,t.fbid)}},model:{value:t.listCheck,callback:function(s){e.$set(t,"listCheck",s)},expression:"i.listCheck"}})],1),e._v(" "),s("td",[s("img",{attrs:{src:e.imgs[t.levels]}}),e._v(" "),s("span",[e._v(e._s(e.levels[t.levels/1+1]))])]),e._v(" "),s("td",{staticClass:"feedBackTableContent"},[e._v(e._s(e._f("capitalize")(t.content)))]),e._v(" "),s("td",[e._v(e._s(t.realname))]),e._v(" "),s("td",[e._v(e._s(t.username))]),e._v(" "),s("td",[e._v(e._s(t.savetime))]),e._v(" "),s("td",[s("div",{staticClass:"ListCode",style:{backgroundColor:e.backGroundColor[t.states]}},[e._v(e._s(e.states[t.states/1+1]))])]),e._v(" "),s("td",{style:{color:e.colorselects}},[s("span",{staticStyle:{cursor:"pointer"},on:{click:function(s){e.goappxiugai(t.content,t,"fbid")}}},[e._v(e._s(e.fbList.handl))])])])}),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.deletshow,expression:"deletshow"}],staticClass:"feedBackDelet",attrs:{type:"danger"},on:{click:function(t){e.doChoice(e.totalChoice,"totalChecked")}}},[e._v(e._s(e.$buttonObj.remove))])],2)]),e._v(" "),s("el-dialog",{attrs:{title:e.$promptObj.warn,visible:e.centerDialogVisible,width:"330px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[s("span",[e._v(e._s(e.$promptObj.delwarn))]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v(e._s(e.$buttonObj.cancel))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.delOne}},[e._v(e._s(e.$buttonObj.sure))])],1)]),e._v(" "),s("child",{on:{current:e.getCurrent}})],1)],1)],1)},staticRenderFns:[]};var r=s("VU/8")(c,o,!1,function(e){s("aVOL")},"data-v-746206a4",null);t.default=r.exports}});
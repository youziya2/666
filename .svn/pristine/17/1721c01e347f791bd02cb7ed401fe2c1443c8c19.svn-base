webpackJsonp([8],{E7p7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("bOdI"),c=i.n(s),a=i("js5j"),o=i("I22p"),l=i("LAaC"),n={data:function(){var t;return t={list:[{router:this.$parent.docObj.tit10}],end:this.$parent.docObj.tit02,endgoto:"",allCheck:"",totalChoice:[],totalChecked:[],imgList:{img01:{imgid:"",imgpath:""}},imgNum:"",productActive:"",deletshow:!1,windowHeight:"",centerDialogVisible:!1},c()(t,"windowHeight",""),c()(t,"fileType","image"),c()(t,"fileImg",{image:"./static/img/docimg.png",video:"./static/img/video.png",doc:"./static/img/docword.png",music:"./static/img/audio.png",others:"./static/img/doczip.png"}),c()(t,"flag",1),c()(t,"scct",""),c()(t,"thisPage",1),c()(t,"perPage",23),c()(t,"sumRecord",1),c()(t,"product",[]),t},components:{child:a.a},created:function(){this.load(),window.addEventListener("resize",this.getHeight),this.getHeight()},filters:{capitalize:function(t){return t.length>22?t.substring(0,7)+"……"+t.substring(t.length-9):t}},computed:{colorselects:function(){return this.$route.matched[0].meta.colorselect}},methods:{getCurrent:function(t){this.thisPage=t,this.getData()},initData:function(){this.thisPage=1,this.scct="",Object(o.d)(this.fileType),this.getData()},getHeight:function(){this.windowHeight=this.$config.getHeight(200)},uploadMoreattach:function(t,e){var i=this.$refs.img01.value;if(this.$parent.fileType[this.fileType].indexOf(i.substring(i.lastIndexOf(".")+1))<0)return this.$refs.img01.value="",this.$message.error(this.$parent.docObj.tit09);var s={isAttach:"attach",types:"attach",tbname:"attach",imgIndex:this.imgList[t],dom:document.getElementById(t),pkid:e,fn:this.getData};this.scct="",Object(l._22)(s)},allChoice:function(){var t=this;this.product.forEach(function(e){t.allCheck?(e.listCheck=!0,t.totalChoice.push(e.atid)):(e.listCheck=!1,t.totalChoice=[])})},getScct:function(){this.thisPage=1,Object(o.p)(this.fileType,{scct:""},this)},setScct:function(){var t={scct:this.scct};Object(o.r)(this.fileType,t)},doSearch:function(){this.setScct(),this.thisPage=1,this.getData(!0)},getChoice:function(t,e,i,s){Object(o.l)(t,e,i,s)},isDelect:function(t,e,i){this.centerDialogVisible=!0,this.flag=t,this.imgNum=e,this.imgList.img01.imgid=i},delPictrue:function(){this.thisPage=1,Object(l.k)(this,"fil","getData")},doChoice:function(t,e,i){this.centerDialogVisible=!0,this.flag=i,this[e]=Object(o.h)(t,e),this[e]=this.splitArr(this[e],0),this.selectNum=this[e].length,this.$bus.emit("deleteArr",this[e],"atid")},allDelect:function(){var t=this,e={success:function(e){(e=JSON.parse(e)).message.indexOf("removeSuccess")>-1?(t.$message.success(t.$promptObj.removesuccess),t.centerDialogVisible=!1,t.getData()):t.$message.error(t.$promptObj.removefail)}};Object(l.h)("BHAttachServiceInfc.batchRemoveAttach","attach",e)},splitArr:function(t,e){for(var i=[],s=[],c=0;c<t.length;c++)i=t[c].split("@@"),s.push(i[e]);return s},allDownload:function(){this.totalChecked=Object(o.h)(this.totalChoice,"totalChecked"),this.totalChecked=this.splitArr(this.totalChecked,1);for(var t,e,i,s,c=0;c<this.totalChecked.length;c++)t="第"+c+"个文件",e=this.totalChecked[c],i=void 0,s=void 0,i=document.createElement("a"),(s=document.createEvent("MouseEvents")).initEvent("click",!1,!1),i.href=e,i.download=t,i.dispatchEvent(s)},load:function(){var t=this.$route.params.id;this.fileType="video"===t?"video":"image"===t?"image":"music"===t?"music":"doc"===t?"doc":"others"===t?"others":"",this.scct="",this.getScct(),this.getData()},getData:function(){var t=this,e={self:this,success:function(e){if(e.data.message.indexOf("getSuccess")>-1){var i=e.data.attachList,s={};t.sumRecord=e.data.page.sumRecord,t.product=[];for(var c=0;c<i.length;c++)(s=i[c].fieldvalues).listCheck=!1,t.product.push(s);t.currs=Math.ceil(e.data.page.sumRecord/t.perPage),t.$bus.emit("doPage",t.currs,t.perPage,t.thisPage),t.totalChoice=[],t.totalChecked=[]}else t.sumRecord=t.product.length,t.$message.error(t.$promptObj.searchfail)}};Object(l.F)(e)}},watch:{product:{deep:!0,handler:function(t){var e=this;this.deletshow=!1,this.allCheck=!0,t.forEach(function(t){t.listCheck&&(e.deletshow=!0),!t.listCheck&&(e.allCheck=!1)})}},$route:"load"}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.deletshow?s("div",{staticClass:"doc-btn-group"},[s("el-row",[s("el-button",{style:{backgroundColor:t.colorselects,color:"#fff"},nativeOn:{click:function(e){t.allDownload()}}},[t._v(t._s(t.$parent.docObj.tit11))]),t._v(" "),s("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.doChoice(t.totalChoice,"totalChecked",2)}}},[t._v(t._s(t.$parent.docObj.tit12))])],1)],1):t._e(),t._v(" "),s("div",{staticClass:"docSearch"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.$parent.docObj.tit03},model:{value:t.scct,callback:function(e){t.scct=e},expression:"scct"}},[s("el-button",{style:{backgroundColor:t.colorselects},attrs:{slot:"append",icon:"el-icon-search"},nativeOn:{click:function(e){t.doSearch()}},slot:"append"})],1)],1),t._v(" "),s("el-dialog",{attrs:{title:t.$promptObj.warn,visible:t.centerDialogVisible,width:"330px",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("span",[t._v(t._s(t.$promptObj.delwarn))]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v(t._s(t.$buttonObj.cancel))]),t._v(" "),1==t.flag?[s("el-button",{attrs:{type:"primary"},on:{click:t.delPictrue}},[t._v(t._s(t.$buttonObj.sure))])]:t._e(),t._v(" "),2==t.flag?[s("el-button",{attrs:{type:"primary"},on:{click:t.allDelect}},[t._v(t._s(t.$buttonObj.sure))])]:t._e()],2)]),t._v(" "),s("the-breadcrumb",{attrs:{end:t.end,list:t.list,endgoto:t.endgoto},on:{initData:t.initData}}),t._v(" "),s("div",{staticClass:"documentContent"},[s("el-scrollbar",{staticStyle:{width:"100%","overflow-x":"hidden"},style:{height:t.windowHeight}},[s("div",[t.product.length>0?s("el-checkbox",{on:{change:t.allChoice},model:{value:t.allCheck,callback:function(e){t.allCheck=e},expression:"allCheck"}},[t._v(t._s(t.$buttonObj.allCheck))]):t._e()],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"documentShangchuan"},[s("form",{staticClass:"uploadForm",staticStyle:{position:"relative"},attrs:{enctype:"multipart/form-data"}},[s("div",{staticClass:"file-imgs"},[s("input",{ref:"img01",attrs:{type:"file",id:"img01",title:t.$buttonObj.clickFile,name:"img01",multiple:"multiple"},on:{change:function(e){t.uploadMoreattach("img01","atid")}}}),t._v(" "),s("div",{staticClass:"show-imgs"},[t.imgList.img01.imgpath?s("img",{attrs:{src:t.imgList.img01.imgpath}}):t._e()])])])])]),t._v(" "),t.product.length<1?s("div",{staticClass:"content-null",staticStyle:{clear:"both"}},[t._v(" "+t._s(t.$buttonObj.noData)+" ")]):t._e(),t._v(" "),t._l(t.product,function(e,c){return s("el-col",{key:c,attrs:{span:4}},[s("div",{staticClass:"documentLists",class:e.listCheck?"documentListsActive":"",on:{mouseenter:function(e){t.productActive=c},mouseleave:function(e){t.productActive=""}}},[s("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.productActive===c||e.listCheck,expression:"productActive === index||item.listCheck"}],attrs:{name:"checkcolor"},on:{change:function(i){t.getChoice(t.totalChoice,c,e.listCheck,e.atid+"@@"+t.baseUrl+e.aturl)}},model:{value:e.listCheck,callback:function(i){t.$set(e,"listCheck",i)},expression:"item.listCheck"}}),t._v(" "),s("div",{staticClass:"docImg"},[s("img",{attrs:{src:t.fileImg[t.fileType],title:e.atcname}})]),t._v(" "),s("div",{staticClass:"docTitle"},[t._v(t._s(t._f("capitalize")(e.atcname)))]),t._v(" "),s("div",{staticClass:"uplodownlo"},[s("a",{attrs:{href:t.baseUrl+e.aturl,download:""}},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.productActive===c,expression:"productActive === index"}],staticStyle:{float:"left"},attrs:{src:i("XeVS")}})]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.productActive===c&&!e.listCheck,expression:"productActive === index && !item.listCheck"}],staticStyle:{float:"right"},on:{click:function(i){t.isDelect(1,"img01",e.atid)}}},[s("img",{attrs:{src:i("Kvtr")}})])])],1)])})],2),t._v(" "),s("child",{on:{current:t.getCurrent}})],1)],1)],1)},staticRenderFns:[]};var h=i("VU/8")(n,r,!1,function(t){i("siSg")},"data-v-05bb21ec",null);e.default=h.exports},Kvtr:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAnBAMAAACRTyc4AAAAJFBMVEVHcEzMAynODjLOCzDODTHODTLNBzDODjLODjHODjLODDDODzJiiDEhAAAADHRSTlMACXYiUD4TjmelK86GjGg5AAABUklEQVQoz+2ST2vCMBjGk4vnlLEcPAbB6smS2oPHNU7x5mad9NRQ8NDjmLheO4eZxzIQ2Ulad+gXGPt2e2PnujH2DfaQwJNf/vLmQcjQyuP33ct2I7VHiPIsy4qLeLuMd42CZ4UjUXgQfSGaW1MlcSrERPgWioYsUWy5cObRYMeUyVavwJRSCXMJwjYzwQMLJwLUtxBCZydLOe8V2ZwAwyE4DndgOpdSagSQUhgRbUpQCh+nawfrG6N+oE8eTuFQiUMHhRmJVntg9bWLIzGlkxGxHztdcwrsvOXCyx7oehFcpXv7tmQjbC/b9Ok5uHkbVyyP27T1yS5Pe3+t+2d/Mqjz4EedXQT/gWcbYjc6FaOFhXqQHT841XljGBQaBFIaeVqyBufOsfGQz1K9t96697yDp7vve0k61jkYMFWpeaeTUssTlnyJ9XVecHfIKpnXBH0ARBfEh8jDhpgAAAAASUVORK5CYII="},XeVS:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAApBAMAAACvsJZ1AAAAJFBMVEVHcEyZmZmZmZmZmZmWlpaZmZmXl5eZmZmZmZmZmZmZmZmXl5cwtPaoAAAADHRSTlMA6otxDbszSaD5zh+CQyE6AAABJ0lEQVQoz2NggILSYAZ0YLUYXYTFcpIDupAhFiEhkoVcXBxgQixgNoN3WtoWmBA3hF0UtVQbJuTctbR9A4N7l6AUXMhpoaRECUPSTKkV1ghVC2e2MVjMUi9DmJVetDKYQVWigAXhCBb2xkUMqkIJyO7iNsQQYoMJuUCEgO6ECXHvdgALbdsCF3LXqAYJuXVYw4WcA5u3GAq5FAl2I1R1Ti0xFHLTnIVQxV0hGKwoUbEyOAVho3uXaKBUo6gZkiNYMmbOlJwZvAFJiGF748yZM6wdkIVYSiUnghQhCTG4AS1lQBVyKVLfgCbE4L2FAV2IwQFTiIE2QhIFKEKKi0DxWI4EQPGYLCnagQSiJqoxuDdOFEQCoDTBXdQaigQiQF51KzZGAuYpDAAXDHzfqRWqiwAAAABJRU5ErkJggg=="},siSg:function(t,e){}});